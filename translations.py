TRANSLATIONS = {
    'ru': {
        'welcome': "👋 Привет! Я moonlight",
        'registration_key': "🔑 Ваш регистрационный ключ: {}",
        'select_language': "Выберите язык:",
        'current_model': "🤖 Текущая модель: {}",
        'current_language': "🌍 Язык: {}",
        'menu_hint': "Используйте меню ниже для настройки бота",
        'btn_select_model': "🤖 Выбрать модель",
        'btn_profile': "👤 Профиль",
        'btn_language': "🌍 Язык",
        'select_model': "Выберите модель AI:",
        'model_changed': "✅ Модель изменена на {}",
        'language_changed': "✅ Язык изменен на {}",
        'profile_stats': """📊 Статистика профиля:
└ Ключ: {}
└ Отправлено сообщений: {}
└ Модель: {}
└ Язык: {}""",
        'error': "❌ Произошла ошибка: {}",
        'thinking': "⏳ Думаю...",
        'btn_regenerate': "🔄 Перегенерировать",
        'btn_modify': "✏️ Изменить ответ",
        'btn_shorter': "📝 Короче",
        'btn_longer': "📜 Длиннее",
        'btn_simpler': "🔽 Проще",
        'btn_complex': "🔼 Сложнее",
        'history_header': '📝 История последних сообщений:',
        'regenerating': "🔄 Генерирую новый ответ...",
        'modify_shorter': "Сделай ответ короче и лаконичнее",
        'modify_longer': "Предоставь более подробный и развернутый ответ",
        'modify_simpler': "Объясни простыми словами, как для начинающего",
        'modify_complex': "Предоставь более техническое и детальное объяснение",
        'btn_back': "🔙 Назад",
        'bot_description': """🤖 moonlight - ваш персональный AI-ассистент:
• Поддержка нескольких языков
• Несколько моделей AI
• Настройка под ваши потребности
• Защита конфиденциальности

Выберите язык для продолжения.""",
    },
    'en': {
        'welcome': "👋 Hello! I'm moonlight.",
        'registration_key': "🔑 Your registration key: {}",
        'select_language': "🌍 Please select your language:",
        'current_model': "🤖 Current model: {}",
        'current_language': "🌍 Language: {}",
        'menu_hint': "Use the menu below to configure the bot:",
        'btn_select_model': "🤖 Select Model",
        'btn_profile': "👤 Profile",
        'btn_language': "🌍 Language",
        'select_model': "Choose AI model:",
        'model_changed': "✅ Model changed to {}",
        'language_changed': "✅ Language changed to {}",
        'profile_stats': """📊 Profile Statistics:
└ Key: {}
└ Messages sent: {}
└ Model: {}
└ Language: {}""",
        'error': "❌ Error occurred: {}",
        'thinking': "⏳ Thinking...",
        'btn_regenerate': "🔄 Regenerate",
        'btn_modify': "✏️ Modify answer",
        'btn_shorter': "📝 Shorter",
        'btn_longer': "📜 Longer",
        'btn_simpler': "🔽 Simpler",
        'btn_complex': "🔼 Complex",
        'history_header': '📝 Recent messages history:',
        'regenerating': "🔄 Generating new answer...",
        'modify_shorter': "Make the answer shorter and more concise",
        'modify_longer': "Provide a more detailed and comprehensive answer",
        'modify_simpler': "Explain in simpler terms, as if to a beginner",
        'modify_complex': "Provide a more technical and detailed explanation",
        'btn_back': "🔙 Back",
        'bot_description': """🤖 moonlight - your personal AI assistant:
• Multi-language support
• Multiple AI models
• Customizable experience
• Privacy protection

Choose a language to continue.""",
    },
    'es': {
        'welcome': "👋 ¡Hola! Soy moonlight.",
        'registration_key': "🔑 Tu clave de registro: {}",
        'select_language': "🌍 Por favor, selecciona tu idioma:",
        'current_model': "🤖 Modelo actual: {}",
        'current_language': "🌍 Idioma: {}",
        'menu_hint': "Usa el menú de abajo para configurar el bot:",
        'btn_select_model': "🤖 Seleccionar Modelo",
        'btn_profile': "👤 Perfil",
        'btn_language': "🌍 Idioma",
        'select_model': "Elige el modelo de IA:",
        'model_changed': "✅ Modelo cambiado a {}",
        'language_changed': "✅ Idioma cambiado a {}",
        'profile_stats': """📊 Estadísticas del perfil:
└ Clave: {}
└ Mensajes enviados: {}
└ Modelo: {}
└ Idioma: {}""",
        'error': "❌ Error: {}",
        'thinking': "⏳ Pensando...",
        'btn_regenerate': "🔄 Regenerar",
        'btn_modify': "✏️ Modificar respuesta",
        'btn_shorter': "📝 Más corto",
        'btn_longer': "📜 Más largo",
        'btn_simpler': "🔽 Más simple",
        'btn_complex': "🔼 Más complejo",
        'history_header': '📝 Historial de mensajes recientes:',
        'regenerating': "🔄 Generando nueva respuesta...",
        'modify_shorter': "Haz la respuesta más corta y concisa",
        'modify_longer': "Proporciona una respuesta más detallada y completa",
        'modify_simpler': "Explica en términos más simples, como para un principiante",
        'modify_complex': "Proporciona una explicación más técnica y detallada",
        'btn_back': "🔙 Atrás",
        'bot_description': """🤖 moonlight - tu asistente de IA personal:
• Soporte multilingüe
• Múltiples modelos de IA
• Experiencia personalizable
• Protección de privacidad

Elige un idioma para continuar.""",
    },
    'de': {
        'welcome': "👋 Hallo! Ich bin moonlight.",
        'registration_key': "🔑 Dein Registrierungsschlüssel: {}",
        'select_language': "🌍 Bitte wähle deine Sprache:",
        'current_model': "🤖 Aktuelles Modell: {}",
        'current_language': "🌍 Sprache: {}",
        'menu_hint': "Verwende das Menü unten, um den Bot zu konfigurieren:",
        'btn_select_model': "🤖 Modell wählen",
        'btn_profile': "👤 Profil",
        'btn_language': "🌍 Sprache",
        'select_model': "Wähle das KI-Modell:",
        'model_changed': "✅ Modell geändert zu {}",
        'language_changed': "✅ Sprache geändert zu {}",
        'profile_stats': """📊 Profilstatistik:
└ ID: {}
└ Schlüssel: {}
└ Gesendete Nachrichten: {}
└ Modell: {}
└ Sprache: {}""",
        'error': "❌ Fehler aufgetreten: {}",
        'thinking': "⏳ Denke nach...",
        'btn_regenerate': "🔄 Neu generieren",
        'btn_modify': "✏️ Antwort ändern",
        'btn_shorter': "📝 Kürzer",
        'btn_longer': "📜 Länger",
        'btn_simpler': "🔽 Einfacher",
        'btn_complex': "🔼 Komplexer",
        'history_header': '📝 Letzte Nachrichten:',
        'regenerating': "🔄 Neue Antwort generieren...",
        'modify_shorter': "Mache die Antwort kürzer und prägnanter",
        'modify_longer': "Gib eine ausführlichere und umfassendere Antwort",
        'modify_simpler': "Erkläre in einfacheren Worten, wie für einen Anfänger",
        'modify_complex': "Gib eine technischere und detailliertere Erklärung",
        'btn_back': "🔙 Zurück",
        'bot_description': """🤖 moonlight - dein persönlicher KI-Assistent:
• Mehrsprachige Unterstützung
• Mehrere KI-Modelle
• Anpassbare Erfahrung
• Datenschutz

Wähle eine Sprache, um fortzufahren.""",
    },
    'fr': {
        'welcome': "👋 Bonjour! Je suis moonlight.",
        'registration_key': "🔑 Votre clé d'inscription: {}",
        'select_language': "🌍 Veuillez choisir votre langue:",
        'current_model': "🤖 Modèle actuel: {}",
        'current_language': "🌍 Langue: {}",
        'menu_hint': "Utilisez le menu ci-dessous pour configurer le bot:",
        'btn_select_model': "🤖 Choisir le modèle",
        'btn_profile': "👤 Profil",
        'btn_language': "🌍 Langue",
        'select_model': "Choisissez le modèle IA:",
        'model_changed': "✅ Modèle changé pour {}",
        'language_changed': "✅ Langue changée pour {}",
        'profile_stats': """📊 Statistiques du profil:
└ ID: {}
└ Clé: {}
└ Messages envoyés: {}
└ Modèle: {}
└ Langue: {}""",
        'error': "❌ Erreur survenue: {}",
        'thinking': "⏳ Réflexion...",
        'btn_regenerate': "🔄 Régénérer",
        'btn_modify': "✏️ Modifier la réponse",
        'btn_shorter': "📝 Plus court",
        'btn_longer': "📜 Plus long",
        'btn_simpler': "🔽 Plus simple",
        'btn_complex': "🔼 Plus complexe",
        'history_header': '📝 Historique des messages récents:',
        'regenerating': "🔄 Génération d'une nouvelle réponse...",
        'modify_shorter': "Rends la réponse plus courte et concise",
        'modify_longer': "Fournis une réponse plus détaillée et complète",
        'modify_simpler': "Explique en termes plus simples, comme pour un débutant",
        'modify_complex': "Fournis une explication plus technique et détaillée",
        'btn_back': "🔙 Retour",
        'bot_description': """🤖 moonlight - votre assistant IA personnel :
• Support multilingue
• Plusieurs modèles d'IA
• Expérience personnalisable
• Protection de la confidentialité

Choisissez une langue pour continuer.""",
    }
}

# Словарь с названиями языков
LANGUAGE_NAMES = {
    'ru': 'Русский',
    'en': 'English',
    'es': 'Español',
    'de': 'Deutsch',
    'fr': 'Français'
}

def get_text(lang_code: str, key: str, *args) -> str:
    """Получить перевод текста по ключу и языку"""
    # Проверяем наличие языка в словаре переводов
    if not lang_code or lang_code not in TRANSLATIONS:
        lang_code = 'ru'
    
    # Получаем текст для указанного языка или используем русский как запасной вариант
    text = TRANSLATIONS[lang_code].get(key)
    if text is None:
        text = TRANSLATIONS['ru'][key]
    
    # Форматируем текст с аргументами, если они есть
    if args:
        try:
            return text.format(*args)
        except Exception as e:
            print(f"Error formatting text: {e}")
            return text
    return text
