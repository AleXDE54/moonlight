TRANSLATIONS = {
    'ru': {
        'welcome': "üëã –ü—Ä–∏–≤–µ—Ç! –Ø moonlight",
        'registration_key': "üîë –í–∞—à —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–ª—é—á: {}",
        'select_language': "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
        'current_model': "ü§ñ –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å: {}",
        'current_language': "üåç –Ø–∑—ã–∫: {}",
        'menu_hint': "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –Ω–∏–∂–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞",
        'btn_select_model': "ü§ñ –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å",
        'btn_profile': "üë§ –ü—Ä–æ—Ñ–∏–ª—å",
        'btn_language': "üåç –Ø–∑—ã–∫",
        'select_model': "–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å AI:",
        'model_changed': "‚úÖ –ú–æ–¥–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ {}",
        'language_changed': "‚úÖ –Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ {}",
        'profile_stats': """üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è:
‚îî –ö–ª—é—á: {}
‚îî –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {}
‚îî –ú–æ–¥–µ–ª—å: {}
‚îî –Ø–∑—ã–∫: {}""",
        'error': "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {}",
        'thinking': "‚è≥ –î—É–º–∞—é...",
        'btn_regenerate': "üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å",
        'btn_modify': "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç",
        'btn_shorter': "üìù –ö–æ—Ä–æ—á–µ",
        'btn_longer': "üìú –î–ª–∏–Ω–Ω–µ–µ",
        'btn_simpler': "üîΩ –ü—Ä–æ—â–µ",
        'btn_complex': "üîº –°–ª–æ–∂–Ω–µ–µ",
        'history_header': 'üìù –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:',
        'regenerating': "üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç...",
        'modify_shorter': "–°–¥–µ–ª–∞–π –æ—Ç–≤–µ—Ç –∫–æ—Ä–æ—á–µ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω–µ–µ",
        'modify_longer': "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç",
        'modify_simpler': "–û–±—ä—è—Å–Ω–∏ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫–∞–∫ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ",
        'modify_complex': "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å –±–æ–ª–µ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ",
        'btn_back': "üîô –ù–∞–∑–∞–¥",
        'bot_description': """ü§ñ moonlight - –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤
‚Ä¢ –ù–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π AI
‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
‚Ä¢ –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.""",
    },
    'en': {
        'welcome': "üëã Hello! I'm moonlight.",
        'registration_key': "üîë Your registration key: {}",
        'select_language': "üåç Please select your language:",
        'current_model': "ü§ñ Current model: {}",
        'current_language': "üåç Language: {}",
        'menu_hint': "Use the menu below to configure the bot:",
        'btn_select_model': "ü§ñ Select Model",
        'btn_profile': "üë§ Profile",
        'btn_language': "üåç Language",
        'select_model': "Choose AI model:",
        'model_changed': "‚úÖ Model changed to {}",
        'language_changed': "‚úÖ Language changed to {}",
        'profile_stats': """üìä Profile Statistics:
‚îî Key: {}
‚îî Messages sent: {}
‚îî Model: {}
‚îî Language: {}""",
        'error': "‚ùå Error occurred: {}",
        'thinking': "‚è≥ Thinking...",
        'btn_regenerate': "üîÑ Regenerate",
        'btn_modify': "‚úèÔ∏è Modify answer",
        'btn_shorter': "üìù Shorter",
        'btn_longer': "üìú Longer",
        'btn_simpler': "üîΩ Simpler",
        'btn_complex': "üîº Complex",
        'history_header': 'üìù Recent messages history:',
        'regenerating': "üîÑ Generating new answer...",
        'modify_shorter': "Make the answer shorter and more concise",
        'modify_longer': "Provide a more detailed and comprehensive answer",
        'modify_simpler': "Explain in simpler terms, as if to a beginner",
        'modify_complex': "Provide a more technical and detailed explanation",
        'btn_back': "üîô Back",
        'bot_description': """ü§ñ moonlight - your personal AI assistant:
‚Ä¢ Multi-language support
‚Ä¢ Multiple AI models
‚Ä¢ Customizable experience
‚Ä¢ Privacy protection

Choose a language to continue.""",
    },
    'es': {
        'welcome': "üëã ¬°Hola! Soy moonlight.",
        'registration_key': "üîë Tu clave de registro: {}",
        'select_language': "üåç Por favor, selecciona tu idioma:",
        'current_model': "ü§ñ Modelo actual: {}",
        'current_language': "üåç Idioma: {}",
        'menu_hint': "Usa el men√∫ de abajo para configurar el bot:",
        'btn_select_model': "ü§ñ Seleccionar Modelo",
        'btn_profile': "üë§ Perfil",
        'btn_language': "üåç Idioma",
        'select_model': "Elige el modelo de IA:",
        'model_changed': "‚úÖ Modelo cambiado a {}",
        'language_changed': "‚úÖ Idioma cambiado a {}",
        'profile_stats': """üìä Estad√≠sticas del perfil:
‚îî Clave: {}
‚îî Mensajes enviados: {}
‚îî Modelo: {}
‚îî Idioma: {}""",
        'error': "‚ùå Error: {}",
        'thinking': "‚è≥ Pensando...",
        'btn_regenerate': "üîÑ Regenerar",
        'btn_modify': "‚úèÔ∏è Modificar respuesta",
        'btn_shorter': "üìù M√°s corto",
        'btn_longer': "üìú M√°s largo",
        'btn_simpler': "üîΩ M√°s simple",
        'btn_complex': "üîº M√°s complejo",
        'history_header': 'üìù Historial de mensajes recientes:',
        'regenerating': "üîÑ Generando nueva respuesta...",
        'modify_shorter': "Haz la respuesta m√°s corta y concisa",
        'modify_longer': "Proporciona una respuesta m√°s detallada y completa",
        'modify_simpler': "Explica en t√©rminos m√°s simples, como para un principiante",
        'modify_complex': "Proporciona una explicaci√≥n m√°s t√©cnica y detallada",
        'btn_back': "üîô Atr√°s",
        'bot_description': """ü§ñ moonlight - tu asistente de IA personal:
‚Ä¢ Soporte multiling√ºe
‚Ä¢ M√∫ltiples modelos de IA
‚Ä¢ Experiencia personalizable
‚Ä¢ Protecci√≥n de privacidad

Elige un idioma para continuar.""",
    },
    'de': {
        'welcome': "üëã Hallo! Ich bin moonlight.",
        'registration_key': "üîë Dein Registrierungsschl√ºssel: {}",
        'select_language': "üåç Bitte w√§hle deine Sprache:",
        'current_model': "ü§ñ Aktuelles Modell: {}",
        'current_language': "üåç Sprache: {}",
        'menu_hint': "Verwende das Men√º unten, um den Bot zu konfigurieren:",
        'btn_select_model': "ü§ñ Modell w√§hlen",
        'btn_profile': "üë§ Profil",
        'btn_language': "üåç Sprache",
        'select_model': "W√§hle das KI-Modell:",
        'model_changed': "‚úÖ Modell ge√§ndert zu {}",
        'language_changed': "‚úÖ Sprache ge√§ndert zu {}",
        'profile_stats': """üìä Profilstatistik:
‚îî ID: {}
‚îî Schl√ºssel: {}
‚îî Gesendete Nachrichten: {}
‚îî Modell: {}
‚îî Sprache: {}""",
        'error': "‚ùå Fehler aufgetreten: {}",
        'thinking': "‚è≥ Denke nach...",
        'btn_regenerate': "üîÑ Neu generieren",
        'btn_modify': "‚úèÔ∏è Antwort √§ndern",
        'btn_shorter': "üìù K√ºrzer",
        'btn_longer': "üìú L√§nger",
        'btn_simpler': "üîΩ Einfacher",
        'btn_complex': "üîº Komplexer",
        'history_header': 'üìù Letzte Nachrichten:',
        'regenerating': "üîÑ Neue Antwort generieren...",
        'modify_shorter': "Mache die Antwort k√ºrzer und pr√§gnanter",
        'modify_longer': "Gib eine ausf√ºhrlichere und umfassendere Antwort",
        'modify_simpler': "Erkl√§re in einfacheren Worten, wie f√ºr einen Anf√§nger",
        'modify_complex': "Gib eine technischere und detailliertere Erkl√§rung",
        'btn_back': "üîô Zur√ºck",
        'bot_description': """ü§ñ moonlight - dein pers√∂nlicher KI-Assistent:
‚Ä¢ Mehrsprachige Unterst√ºtzung
‚Ä¢ Mehrere KI-Modelle
‚Ä¢ Anpassbare Erfahrung
‚Ä¢ Datenschutz

W√§hle eine Sprache, um fortzufahren.""",
    },
    'fr': {
        'welcome': "üëã Bonjour! Je suis moonlight.",
        'registration_key': "üîë Votre cl√© d'inscription: {}",
        'select_language': "üåç Veuillez choisir votre langue:",
        'current_model': "ü§ñ Mod√®le actuel: {}",
        'current_language': "üåç Langue: {}",
        'menu_hint': "Utilisez le menu ci-dessous pour configurer le bot:",
        'btn_select_model': "ü§ñ Choisir le mod√®le",
        'btn_profile': "üë§ Profil",
        'btn_language': "üåç Langue",
        'select_model': "Choisissez le mod√®le IA:",
        'model_changed': "‚úÖ Mod√®le chang√© pour {}",
        'language_changed': "‚úÖ Langue chang√©e pour {}",
        'profile_stats': """üìä Statistiques du profil:
‚îî ID: {}
‚îî Cl√©: {}
‚îî Messages envoy√©s: {}
‚îî Mod√®le: {}
‚îî Langue: {}""",
        'error': "‚ùå Erreur survenue: {}",
        'thinking': "‚è≥ R√©flexion...",
        'btn_regenerate': "üîÑ R√©g√©n√©rer",
        'btn_modify': "‚úèÔ∏è Modifier la r√©ponse",
        'btn_shorter': "üìù Plus court",
        'btn_longer': "üìú Plus long",
        'btn_simpler': "üîΩ Plus simple",
        'btn_complex': "üîº Plus complexe",
        'history_header': 'üìù Historique des messages r√©cents:',
        'regenerating': "üîÑ G√©n√©ration d'une nouvelle r√©ponse...",
        'modify_shorter': "Rends la r√©ponse plus courte et concise",
        'modify_longer': "Fournis une r√©ponse plus d√©taill√©e et compl√®te",
        'modify_simpler': "Explique en termes plus simples, comme pour un d√©butant",
        'modify_complex': "Fournis une explication plus technique et d√©taill√©e",
        'btn_back': "üîô Retour",
        'bot_description': """ü§ñ moonlight - votre assistant IA personnel :
‚Ä¢ Support multilingue
‚Ä¢ Plusieurs mod√®les d'IA
‚Ä¢ Exp√©rience personnalisable
‚Ä¢ Protection de la confidentialit√©

Choisissez une langue pour continuer.""",
    }
}

# –°–ª–æ–≤–∞—Ä—å —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —è–∑—ã–∫–æ–≤
LANGUAGE_NAMES = {
    'ru': '–†—É—Å—Å–∫–∏–π',
    'en': 'English',
    'es': 'Espa√±ol',
    'de': 'Deutsch',
    'fr': 'Fran√ßais'
}

def get_text(lang_code: str, key: str, *args) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ø–æ –∫–ª—é—á—É –∏ —è–∑—ã–∫—É"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —è–∑—ã–∫–∞ –≤ —Å–ª–æ–≤–∞—Ä–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    if not lang_code or lang_code not in TRANSLATIONS:
        lang_code = 'ru'
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—Å—Å–∫–∏–π –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
    text = TRANSLATIONS[lang_code].get(key)
    if text is None:
        text = TRANSLATIONS['ru'][key]
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    if args:
        try:
            return text.format(*args)
        except Exception as e:
            print(f"Error formatting text: {e}")
            return text
    return text
